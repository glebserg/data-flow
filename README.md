## GreenTech

## Краткое описание
Проект "data-flow" является системой для сбора, записи и управления данными с помощью трех микросервисов: generator, postresql и management.

1. Микросервис "generator": 
   - Этот сервис отвечает за генерацию данных.
   - Он создает и хранит данные внутри себя для дальнейшей обработки и записи.
   - Примеры данных, которые могут быть сгенерированы, включают температуру, влажность, уровень CO2.
   - Генерируемые данные могут быть случайными или симулированными, в зависимости от требований проекта.

2. Микросервис "postgresql":
   - Этот сервис представляет базу данных PostgreSQL, которая используется для хранения собранных данных.
   - Сервис обеспечивает доступ к базе данных для сохранения и чтения данных, поступающих от генератора и управляющего сервиса.

3. Микросервис "management":
   - Этот сервис отвечает за сбор данных с генератора, их запись в базу данных и управление базой данных PostgreSQL.
   - Он устанавливает связь с генератором данных и получает от него сгенерированные данные.
   - Затем сервис записывает собранные данные в базу данных PostgreSQL для последующего анализа и использования.
   - Кроме того, сервис предоставляет операции управления базой данных PostgreSQL, такие как создание таблиц, выполнение запросов и другие административные действия.

Цель проекта "data-flow" состоит в создании полной системы для сбора, хранения и управления данными с использованием микросервисной архитектуры. Каждый микросервис выполняет свою специфическую функцию, взаимодействуя между собой для обеспечения эффективного и надежного потока данных.

## Структура проекта

```
├── generator
│   ├── Dockerfile
│   ├── generators.py
│   ├── logger.log
│   ├── main.py
│   ├── requirements.txt
│   └── schemes.py
├── management
│   ├── dependencies.py
│   ├── Dockerfile
│   ├── filler.py
│   ├── main.py
│   ├── models.py
│   ├── requirements.txt
│   └── schemas.py
├── docker-compose.yml
├── .env
```

## Запуск

```
$ git clone https://github.com/glebserg/data-flow.github .
$ docker-compose up
```

## API Generator

http://localhost:5001/docs - ссылка на документацию
![Alt text](docs_generator.png)

## API Management

http://localhost:5002/docs - ссылка на документацию
![Alt text](docs_management.png)

Наполнение БД данными из генератора



## БД

```
Таблица "sensors":
------------------------
| id | type_sensor | number |
------------------------
|    |             |        |

Таблица "metrics_temperature":
------------------------------
| id | sensor_id |     created     | value |
------------------------------
|    |           |                 |       |

Таблица "metrics_humidity":
----------------------------
| id | sensor_id |     created     | value |
----------------------------
|    |           |                 |       |

Таблица "metrics_carbon_dioxide":
---------------------------------
| id | sensor_id |     created     | value |
---------------------------------
|    |           |                 |       |
```

Описание таблиц:

1. Таблица "sensors" содержит информацию о сенсорах.
    - Поле "id" - уникальный идентификатор сенсора.
    - Поле "typesensor" - тип сенсора (строка, максимальная длина 20 символов).
    - Поле "number" - номер сенсора (целое число).

2. Таблица "metricstemperature" содержит метрики температур.
    - Поле "id" - уникальный идентификатор метрики.
    - Поле "sensorid" - идентификатор сенсора, к которому относится метрика (внешний ключ, связь с таблицей "sensors").
    - Поле "created" - дата и время создания метрики (с индексом для ускорения поиска).
    - Поле "value" - значение температуры (число с плавающей точкой).

3. Таблица "metricshumidity" содержит метрики влажности.
    - Поле "id" - уникальный идентификатор метрики.
    - Поле "sensorid" - идентификатор сенсора, к которому относится метрика (внешний ключ, связь с таблицей "sensors").
    - Поле "created" - дата и время создания метрики (с индексом для ускорения поиска).
    - Поле "value" - значение влажности (число с плавающей точкой).

4. Таблица "metricscarbondioxide" содержит метрики уровня CO2 (углекислого газа).
    - Поле "id" - уникальный идентификатор метрики.
    - Поле "sensorid" - идентификатор сенсора, к которому относится метрика (внешний ключ, связь с таблицей "sensors").
    - Поле "created" - дата и время создания метрики (с индексом для ускорения поиска).
    - Поле "value" - значение уровня CO2 (целое число)

